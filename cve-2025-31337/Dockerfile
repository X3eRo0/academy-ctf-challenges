# Use the official x86_64 Ubuntu image
FROM ubuntu:20.04

# Set environment variables
ENV DEBIAN_FRONTEND=noninteractive

# Install necessary packages
RUN apt-get update && \
    apt-get install -y build-essential libssl-dev libsqlite3-dev wget curl && \
    rm -rf /var/lib/apt/lists/*

# Set working directory
WORKDIR /app

# Copy the source code into the container
COPY . /app

# Build the project
RUN make

# Expose the FTP server port
EXPOSE 21

# Command to run when the container starts
CMD ["./ftp_server", "2121", "ftp_users.db", "ftp_root"]
