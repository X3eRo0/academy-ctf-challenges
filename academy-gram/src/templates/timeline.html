{% extends "layout.html" %}
{% block body %}
  <section class="add-post">
    <h3><i class="fas fa-pencil-alt"></i> Create Post</h3>
    <form action="{{ url_for('add_post') }}" method="post" enctype="multipart/form-data">
      <textarea name="content" rows="3" placeholder="What's on your mind, {{ g.user.username }}?"></textarea>
      <div class="post-options">
        <div>
          <input type="file" name="image" id="image" accept="image/*">
          <label for="is_private"><i class="fas fa-lock"></i> Private</label>
          <input type="checkbox" name="is_private" id="is_private">
        </div>
        <input type="submit" value="Share">
      </div>
    </form>
  </section>
  
  <div class="timeline">
  {% for post in posts %}
    <article class="post-card">
      <header class="post-header">
        <a href="{{ url_for('user_profile', username=post.username) }}">
          <i class="fas fa-user-circle"></i>
          <strong>{{ post.username }}</strong>
        </a>
      </header>
      {% if post.image_path %}
      <div class="post-image">
        <img src="{{ url_for('static', filename=post.image_path.replace('static/', '')) }}" alt="Post by {{ post.username }}">
      </div>
      {% endif %}
      <div class="post-content">
        <p>
          <a href="{{ url_for('user_profile', username=post.username) }}"><strong>{{ post.username }}</strong></a>
          {{ post.content }}
        </p>
      </div>
    </article>
  {% else %}
    <p><em>No posts yet. Follow some users to see their posts here!</em></p>
  {% endfor %}
  </div>
{% endblock %}